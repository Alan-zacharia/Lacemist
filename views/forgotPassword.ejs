<%- include('partials/header.ejs') %>

    <header class="header-area header-style-5">
        <div class="header-top header-top-ptb-1 d-none d-lg-block">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-xl-3 col-lg-4">
                        <div class="header-info">
                            <ul>
                                <li><i class="fi-rs-smartphone"></i> <a href="#">(+01) - 2345 - 6789</a></li>
                                <li><i class="fi-rs-marker"></i><a  href="page-contact.html">Our location</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-4">
                        <div class="text-center">
                            <div id="news-flash" class="d-inline-block">
                                <ul>
                                    <li>Get great devices up to 50% off <a href="shop-grid-right.html">View details</a></li>
                                    <li>Supper Value Deals - Save more with coupons</li>
                                    <li>Trendy 25silver jewelry, save up 35% off today <a href="shop-grid-right.html">Shop now</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-4">
                        <div class="header-info header-info-right">
                            <ul>
                                <li>
                                    <a class="language-dropdown-active" href="#"> <i class="fi-rs-world"></i> English <i class="fi-rs-angle-small-down"></i></a>
                                    <ul class="language-dropdown">
                                        <li><a href="#"><img src="assets/imgs/theme/flag-fr.png" alt="">Français</a></li>
                                        <li><a href="#"><img src="assets/imgs/theme/flag-dt.png" alt="">Deutsch</a></li>
                                        <li><a href="#"><img src="assets/imgs/theme/flag-ru.png" alt="">Pусский</a></li>
                                    </ul>
                                </li>
                               
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-bottom sticky-bar sticky-white-bg">
            <div class="container">
                <div class="header-wrap header-space-between position-relative">
                    <div class="logo logo-width-1">
                        <h4><span style="color: hsl(39, 100%, 50%);">LACE</span><span style="color: hwb(240 0% 0%);">MIST</span></h4>
                    </div>
                    <div class="main-menu main-menu-grow main-menu-padding-1 main-menu-lh-1 main-menu-mrg-1 hm3-menu-padding d-none d-lg-block hover-boder">
                        <nav>
                            <ul>
                                <li><a class="active" href="/">Home <i class="fi-rs-angle-down"></i></a>
                                   
                                </li>
                                <li><a href="/product">Shop</a> 
                                <li><a href="#">Pages <i class="fi-rs-angle-down"></i></a>
                                    <ul class="sub-menu">
                                        <li><a href="/profile">My Account</a></li>
                                        <li><a href="/login">login/register</a></li>
                                        <li><a href="page-404">404 Page</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="page-contact.html">Contact</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div class="header-action-right">
                        <div class="search-style-2">
                            <form action="#">
                                <select class="select-active">
                                    <option>Search in</option>
                                    <option>Women's Clothing</option>
                                    <option>Men's Clothing</option>
                                    <option>Cellphones</option>
                                    <option>Computer & Office</option>
                                    <option>Consumer Electronics</option>
                                    <option>Jewelry & Accessories</option>
                                    <option>Home & Garden</option>
                                    <option>Luggage & Bags</option>
                                    <option>Shoes</option>
                                    <option>Mother & Kids</option>
                                </select>
                                <input type="text" placeholder="Search for items…">
                            </form>
                        </div>
                        <div class="header-action-2">
                            <div class="header-action-icon-2">
                                <a class="mini-cart-icon" href="/cart">
                                    <img alt="Evara" src="assets/imgs/theme/icons/icon-cart.svg">   
                                </a>  
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="mobile-header-active mobile-header-wrapper-style">
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <h4><span style="color: hsl(39, 100%, 50%);">LACE</span><span style="color: hwb(240 0% 0%);">MIST</span></h4>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="#">
                        <input type="text" placeholder="Search for items…">
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                   
                    <!-- mobile menu start -->
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/home">Home</a>
                               
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/product">shop</a>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Pages</a>
                                <ul class="dropdown">
                                    <li><a href="/login">login/register</a></li>
                                    <li><a href="page-404">404 Page</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Language</a>
                                <ul class="dropdown">
                                    <li><a href="#">English</a></li>
                                    <li><a href="#">French</a></li>
                                    <li><a href="#">German</a></li>
                                    <li><a href="#">Spanish</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div class="mobile-header-info-wrap mobile-header-border">
                    <div class="single-mobile-header-info mt-30">
                        <a  href="page-contact.html"> Our location </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="page-login-register.html">Log In / Sign Up </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#">(+01) - 2345 - 6789 </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
<main class="main">
    <div class="page-header breadcrumb-wrap">
        <div class="container">
            <div class="breadcrumb">
                <a href="/home" rel="nofollow">Home</a>
                <span></span> Pages
                <span></span> Login
            </div>
        </div>
    </div>
    <section class="pt-50 pb-100">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 m-auto">
                    <div class="row">
                        <div class="col-lg-5 m-auto">
                            <div class="login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5">
                                <div class="padding_eight_all bg-white">
                                    <div class="heading_s1">
                                        <h3 class="mb-30">Forgot Password</h3>
                                    </div>
                                   <form id="forgotpasswordForm">
                                    <div role="alert" aria-live="assertive" aria-atomic="true" class="toast" data-autohide="false" id="toast-container" style="display: none;">
                                     
                                        
                                            <span aria-hidden="true" ><%= message %></span>
                                       
                                        <div class="toast-body" id="toast-message">
                                          
                                        </div>
                                      </div>
                                            <div class="form-group">
                                                <input type="email" required="" id="Email" name="email" placeholder="Enter Your Email">
                                                <span class="text-danger" id="emailerrorMessage"></span>
                                            </div>
                                          
                                            <div class="form-group">
                                                <button type="submit" class="btn btn-fill-out btn-block hover-up" name="login">Submit</button>
                                            </div>
                                        </form>
                                    <div class="text-muted text-center">Don't have an account? <a href="/register">Sign up now</a></div>
                                </div>
                            </div>
                        </div>
                        

                        
                    </div>
                  
                </div>
            </div>
        </div>
    </section>
</main>
<script>

        const forgotForm = document.getElementById('forgotpasswordForm');
        forgotForm.addEventListener('submit',(e)=>{
            e.preventDefault();
            const Email = document.getElementById('Email').value;
            const emailErrorMessage = document.getElementById('emailerrorMessage');
            emailErrorMessage.textContent = '';

            const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

            if (!emailPattern.test(Email)) {
            emailErrorMessage.textContent = 'Please enter a valid email address.';
            return false;
            }

           // alert(Email)
            const toastContainer = document.getElementById('toast-container');
                const toastMessage = document.getElementById('toast-message');
            fetch('/forgot-password',{
                method:'post',
                headers: {
                    'Content-Type': 'application/json', // Specify the content type as JSON
                  
                  },
                body:JSON.stringify({Email})
            })
            .then(response =>   response.json() )
            .then(data => {
                toastContainer.style='block'
            
                if (data && data.message) {
                    toastContainer.style.backgroundColor = '#ff0000';
                    toastMessage.style.color = "#FFFF";
                  toastMessage.textContent = data.message;
                 
                } else {
                  toastMessage.textContent = 'Reset link is sent sucessfully';
                }
                const toast = new bootstrap.Toast(toastContainer);
                toast.show();
              })
              .catch(error => {
                console.error(error);
                toastContainer.style='block'
                if (error && error.message) {
                    toastMessage.textContent = error.message;
                  } else {
                    toastMessage.textContent = 'Some Error occured please try again later';
                  }
              });
        })  
</script>

<%- include('partials/footer') %>